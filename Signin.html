<!DOCTYPE html>
<html>

  <head>
    <title>User & Pin Entry</title>

    <link href="css/main.css" rel="stylesheet" type="text/css" />

  </head>
    <center>
    <img src="BOR_Logo.png"
     width="300" height="100"/>
     <br>
    </center>
    <body style="background-color:rgb(244, 226, 198)">

    <br>
    <center><b><h2>Please enter your ID & Pin in the boxes below</<h2></b></center>
    <hr><br><br><br><br>

      <label for "UserID">ID:</label>
      <input type="text" id="UserID" name="UserID"> <br><br>
      <label for "PinNum">Pin:</label>
      <input type="text" id="PinNum" name="PinNum"> <br><br>
      <button onclick="fetchLogin()">Submit</button>
      <script src="Script.js"></script>
  </body>

  <script>
  async function fetchLogin(){
    fetch('http://localhost:5000/atm/login?' + new URLSearchParams({
      "user" : UserID.value,
      "pin" : PinNum.value
    }), {method: 'GET'})
    .then((test) => test.json())
    .then((data) => {
      checkLogin(data)
    });
  }

  function checkLogin(data){
    alert(data[0].message);
    if (data[0].success){
      document.cookie = "user="+ UserID.value + "; path=/";
      document.cookie = "loggedin=true; path=/";
      window.location.href = "ATMBanking.html";
    }
  }
  </script>

</html>
