<html>
  <head>
    <title>Register Today</title>
      <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <body style="background-color:rgb(244, 226, 198)">
    <center>

      <a href="Homepage.html">
    <img src="BOR_Logo.png"
     width="300" height="100"/> </a>
     <br>
     The Bank of Rona has proudly been serving customers since 2020.
    </center>
    <br>

    <body>
      <ul>
        <li><a class="active" href="Homepage.html">Home</a></li>
        <li><a href="ATMStart.html">Online ATM</a></li>
        <li><a href="FAQ page v1.html">FAQ</a></li>
      </ul>
    </body>
    <br>

      <center>
      <img src="registrationimage.png" width="900" height="200"/>

       <style>
        div {
          background-color: lightgrey;
          width: 450px;
          border: 15px solid maroon;
          padding: 50px;
          margin: 20px;
        }
      </style>

      <body>
        <div>
          <h1> Register Today</h1>


          <h3> Don't have an account?
            Create your account today! </h3>
          <br>
          Username:
          <input type = "text" id = "username">
          <br>
          Password:
          <input type = "password" id = "password">
          <br>
          Pin Number:
          <input type = "password" id = "pin">
          <br>
          First Name:
          <input type = "text" id = "first">
          <br>
          Last Name:
          <input type= "text" id = "last">
          <br>
          <button onclick="createAcc()">Register</button>
        </div>
      </body>
      </center>
    </body>

    <script>
    async function createAcc(){
      fetch('http://localhost:5000/users/add?' + new URLSearchParams({
        "username" : username.value,
        "password" : password.value,
        "firstname" : first.value,
        "lastname" : last.value,
        "pin" : pin.value
      }), {method: 'POST'})
      .then((test) => test.json())
      .then((data) => {
        if (data.success){
          registerSuccess(data);
        }else{
          alert(data.message);
        }
      });
    }

    function registerSuccess(data){
      alert(data.message);
      document.cookie = "user="+ username.value + "; path=/";
      document.cookie = "loggedin=true; path=/";
      window.location.href = "AccountManage.html";
    }
    </script>

</html>
